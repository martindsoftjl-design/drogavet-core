<!DOCTYPE html>
<html lang="es"
      xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/layout-rrhh :: layout(
            ~{::title},
            ~{::content},
            ~{},
            ~{}
      )}">
    <title>Áreas | RR.HH</title>
</head>

<div th:fragment="content" class="container py-4">

    <!-- HEADER -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h2 class="fw-semibold mb-1">Áreas</h2>
            <p class="text-muted mb-0">
                Gestión de áreas de la empresa
            </p>
        </div>

        <a th:href="@{/rrhh/areas/nuevo}"
           class="btn btn-primary">
            <i class="bi bi-plus-circle"></i>
            Nueva área
        </a>
    </div>

    <!-- MENSAJES -->
    <div th:if="${mensaje != null}"
         class="alert alert-dismissible fade show"
         th:classappend="' alert-' + ${tipo}">
        <span th:text="${mensaje}"></span>
        <button type="button"
                class="btn-close"
                data-bs-dismiss="alert"></button>
    </div>

    <!-- TABLA -->
    <div class="card shadow-sm">
        <div class="table-responsive">

            <table class="table table-hover align-middle mb-0">
                <thead class="table-light">
                <tr>
                    <th style="width: 80px;">ID</th>
                    <th>Área</th>
                    <th class="text-center" style="width: 140px;">
                        Empleados
                    </th>
                    <th class="text-center" style="width: 180px;">
                        Acciones
                    </th>
                </tr>
                </thead>

                <tbody>

                <tr th:each="area : ${areas}">
                    <td th:text="${area.id}"></td>

                    <td>
                        <strong th:text="${area.nombre}"></strong>
                    </td>

                    <td class="text-center">
                        <span class="badge bg-secondary"
                              th:text="${area.empleados != null ? area.empleados.size() : 0}">
                        </span>
                    </td>

                    <td class="text-center">

                        <div class="d-inline-flex gap-1">

                            <a th:href="@{/rrhh/areas/editar/{id}(id=${area.id})}"
                               class="btn btn-sm btn-outline-warning"
                               title="Editar área">
                                <i class="bi bi-pencil"></i>
                            </a>

                            <a th:href="@{/rrhh/areas/eliminar/{id}(id=${area.id})}"
                               class="btn btn-sm btn-outline-danger btn-eliminar"
                               title="Eliminar área"
                               data-nombre="area">
                                <i class="bi bi-trash"></i>
                            </a>

                        </div>

                    </td>
                </tr>

                <tr th:if="${#lists.isEmpty(areas)}">
                    <td colspan="4"
                        class="text-center text-muted py-4">
                        No hay áreas registradas
                    </td>
                </tr>

                </tbody>
            </table>

        </div>
    </div>

    <!-- VOLVER -->
    <div class="mt-4">
        <a th:href="@{/rrhh}"
           class="btn btn-outline-secondary">
            <i class="bi bi-arrow-left"></i>
            Volver a RR.HH
        </a>
    </div>

</div>

</html>
